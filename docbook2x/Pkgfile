# Description:	Program to convert docbook documents to man pages
# URL:		http://docbook2x.sourceforge.net
# Packager:	Alan Mizrahi, alan at mizrahi dot com dot ve
# Maintainer:  Chris Farrell, timcowchip at gmail dot com 
# Depends on:	docbook-xml docbook-xsl build-docbook-catalog p5-xml-sax

name=docbook2x
_name=docbook2X
version=0.8.8
release=2
source=(http://prdownloads.sf.net/$name/$_name-$version.tar.gz
	01_fix_static_datadir_evaluation.patch
	02_fix_418703_dont_use_abbreviated_sfnet_address.patch
	03_fix_420153_filename_whitespace_handling.patch
	04_fix_442782_preprocessor_declaration_syntax.patch
	05_fix_439214_error_on_missing_refentry.patch
	06_fix_man_typo.patch)

build() {
	chmod -R go-w $_name-$version
	cd $_name-$version

	for p in ../*.patch ; do
		patch -p1 -i $p
	done

	./configure \
		--prefix=/usr \
		--program-transform-name='s,^docbook2,docbook2x-,'

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/{doc,info}
}
