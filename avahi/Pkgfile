# Description: A system which facilitates service discovery on a local network via the mDNS/DNS-SD protocol suite
# URL: http://www.avahi.org/
# Maintainer: Brian Madonna, Bmadonnaster at gmail dot com
# Depends on: libdaemon dbus gobject-introspection intltool

name=avahi
version=0.6.32
release=1
source=(https://github.com/lathiat/avahi/releases/download/v$version/$name-$version.tar.gz 
\
	avahi-daemon.rc)

build() {
	cd $name-$version
	./configure --prefix=/usr \
		--with-distro=none \
		--disable-gtk \
		--disable-gtk3 \
		--disable-pygtk \
		--disable-qt3 \
		--disable-qt4 \
		--disable-python-dbus \
		--disable-mono \
		--disable-monodoc \
		--disable-nls \
		--enable-compat-libdns_sd
	make
	make DESTDIR=$PKG install
	rm -r $PKG/usr/share/locale

	ln -s avahi-compat-libdns_sd/dns_sd.h $PKG/usr/include/dns_sd.h
	install -D -m 0755 $SRC/avahi-daemon.rc $PKG/etc/rc.d/avahi-daemon
}
