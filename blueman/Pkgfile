# Description: GTK+ Bluetooth Manager
# URL: https://github.com/blueman-project/blueman
# Maintainer: Chris Farrell, timcowchip at gorge dot net
# Depends on: cython intltool gtk3 bluez libnotify pycairo dbus-python pygobject-gtk3

name=blueman
version=2.0.5
release=2

source=(https://github.com/blueman-project/$name/releases/download/$version/$name-$version.tar.xz \ org.blueman.Mechanism.conf)

build() {
  cd $name-$version
  
  # Fix path for bluetoothd
  sed -i 's|/usr/sbin/bluetoothd|/usr/lib/bluetooth/bluetoothd|' apps/blueman-report

  # Fix non-standard icon names
  sed -i 's/gtk-find/edit-find/' data/ui/device-list-widget.ui
  sed -i 's/mouse/input-mouse/' blueman/services/Input.py
  
  ./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --libexecdir=/usr/lib/$name 
    
  make

  make DESTDIR="$PKG" install
  install -D -m 0755 $SRC/org.blueman.Mechanism.conf $PKG/usr/etc/dbus-1/system.d/org.blueman.Mechanism.conf
  rm -rf $PKG/usr/share/doc
  
}
