# $Id: $
# Description: Provides support for languages encodings 
# URL: http://www.gnu.org/software/libiconv/
# Maintainer: Chris Farrell, timcowchip at gmail dot com
# Packager: Younes Hafri <ycrux@club-internet.fr>
# Depends on: 

name=libiconv
version=1.15
release=1
source=(http://ftp.gnu.org/pub/gnu/libiconv/$name-$version.tar.gz)

build () {
	cd $name-$version
	sed '/LD_RUN_PATH/d' -i Makefile.in
	./configure --prefix=/usr \
		         --disable-nls 
	cp -f /usr/include/stdio.h srclib/stdio.in.h
        make CFLAGS="$CFLAGS"
	make prefix=$PKG/usr install
	rm -rf $PKG/usr/share/doc
        make DESTDIR="$PKG" LIBDIR="/usr/lib" INCLUDEDIR="/usr/include" install
	mv "$PKG"/usr/include/{iconv.h,libiconv.h}
	mv "$PKG"/usr/bin/{iconv,libiconv}
	mv "$PKG"/usr/share/man/man1/{,lib}iconv.1
	mv "$PKG"/usr/share/man/man3/{,libiconv_}iconv.3
	mv "$PKG"/usr/share/man/man3/{,libiconv_}iconvctl.3
	mv "$PKG"/usr/share/man/man3/{,libiconv_}iconv_open.3
	mv "$PKG"/usr/share/man/man3/{,libiconv_}iconv_close.3
	mv "$PKG"/usr/share/man/man3/{,libiconv_}iconv_open_into.3
}
