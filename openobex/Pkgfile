# Description:	Open source implementation of the OBEX protocol
# URL:		http://dev.zuckschwerdt.org/openobex/
# Packager:	Alan Mizrahi, alan at mizrahi dot com dot ve
# Maintainer:    Chris Farrell, timcowchip at gorge dot net

name=openobex
version=1.7.2
release=1
source=(http://downloads.sourceforge.net/$name/$name-$version-Source.tar.gz)

build() {

	sed -i 's|MODE="660", GROUP="plugdev"|TAG+="uaccess"|' $SRC/$name-$version-Source/udev/openobex.rules.in

	mkdir build
	cd build
	cmake ../$name-$version-Source \
	    -DCMAKE_BUILD_TYPE=Release \
	    -DCMAKE_SKIP_RPATH=ON \
	    -DCMAKE_INSTALL_PREFIX=/usr \
	    -DCMAKE_INSTALL_LIBDIR=/usr/lib \
	    -DCMAKE_INSTALL_SBINDIR=/usr/bin \
	    -DCMAKE_INSTALL_UDEVRULESDIR=/usr/lib/udev/rules.d
		
	make all openobex-apps
	make DESTDIR=$PKG install
	
	cp ../${name}-${version}-Source/apps/lib/*.h  "${PKG}/usr/include/openobex/"
	install -m644 apps/lib/libopenobex-apps-common.a "${PKG}/usr/lib/libopenobex-apps-common.a"
	
}
